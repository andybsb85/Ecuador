<script src="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>

<div class = "content-body">
  <div class ="row">
    <div class= "large-6 columns">
      <div class= "book-destination">
        <ul class="tabs" data-tab>
          <li class="tab-title active"><a href="#panel2-1"><%= t('.searchEvent')%></a></li>
          <li class="tab-title"><a href="#panel2-2"><%= t('.searchDestination')%></a></li>
          <li class="tab-title"><a href="#panel2-3"><%= t('.searchActivity')%></a></li>
        </ul>
        <div class="tabs-content">
          <div class="content active" id="panel2-1">
            <form>
              <div class="row">
                <div class="large-12 columns">
                  <label><%= t('.selectCity')%>
                    <%= form_tag({ controller: 'list_event', action: 'index' }, method: 'get') do %>
                      <%= select_tag 'search_city', option_groups_from_collection_for_select(@regions, :cities, :name, :id, :name, 1) %>
                      <%= submit_tag t('.go'), name: nil, class: 'button tiny radius'%>
                    <% end %> 
                  </label>
                </div>
              </div>
            </form>
          </div>
          <div class="content" id="panel2-2">
            <form>
              <div class="row">
                <div class="large-12 columns">
                  <label><%= t('.selectCity')%>
                    <%= form_tag({ controller: 'destination_list', action: 'index' }, method: 'get') do %>
                    <%= select_tag 'search_city', option_groups_from_collection_for_select(@regions, :cities, :name, :id, :name, 1) %>
                    <%= submit_tag  t('.go'), name: nil, class: 'button tiny radius' %>
                    <% end %> 
                  </label>
                </div>
              </div>
              <div class="row">
                <div class="large-12 columns">
                  <label><%= t('.selectTypeDestination')%>
                    <%= form_tag({ controller: 'destination_list', action: 'index' }, method: 'get') do %>
                    <%= select_tag 'search_topic', options_from_collection_for_select(TypeDestination.all, :id, :name) %>
                    <%= submit_tag  t('.go'), name: nil, class: 'button tiny radius' %>
                    <% end %> 
                  </label>
                </div>
              </div>
            </form>    
          </div>
          <div class="content" id="panel2-3">
            <form>
              <div class="row">
                <div class="large-12 columns">
                  <label><%= t('.selectCity')%>
                    <%= form_tag({ controller: 'list_activity', action: 'index' }, method: 'get') do %>
                    <%= select_tag 'search_city', option_groups_from_collection_for_select(@regions, :cities, :name, :id, :name, 1) %>
                    <%= submit_tag  t('.go'), name: nil, class: 'button tiny radius' %>
                    <% end %> 
                  </label>
                </div>
              </div>
              <div class="row">
                <div class="large-12 columns">
                  <label><%= t('.selectTypeDestination')%>
                    <%= form_tag({ controller: 'list_activity', action: 'index' }, method: 'get') do %>
                    <%= select_tag 'search_topic', options_from_collection_for_select(TypeActivity.all, :id, :name) %>
                    <%= submit_tag "Search", name: nil, class: 'button tiny radius' %>
                    <% end %> 
                  </label>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class= "large-6 columns">
      <div class= "map">
        <div style='width: 100%;'>
          <div id="map" style='width: 100%; height: 290px;'></div>
        </div>
      </div>
    </div>
  </div>
  <div class ="row">
    <div class= "large-6 columns">
      <div id= "calendar">
      </div>
    </div>
    <div class= "large-6 columns">
      <div class= "whats-on">
        <div class="flex-video">
          <iframe width="540" height="301" src="//www.youtube.com/embed/9Fi88GBOHOA" frameborder="0" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </div>
  <div class= "row">
    <div class ="large-12 columns">
      <% @destination.each do |destination| %>
        <div class="destinationI">
              <div class="img_location">
                <%= link_to (image_tag(destination.image_url)), destination %>
              </div>
              <div class="des_location">
                <h5><%= link_to (destination.name), destination %></h5>
              </div>
            </div>
        <% end %>  
    </div>    
  </div>
</div>

<%= content_for :scripts do %>
  <script type="text/javascript">
    handler = Gmaps.build('Google');
     handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
      markers = handler.addMarkers(<%=raw @hashcity.to_json %>);        
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
      handler.getMap().setZoom(6);
    });
  </script>


 <script type="text/javascript">
 $(document).ready(function() {

     $('#calendar').fullCalendar({
        theme: true,
        events:  '/events.json',
        eventColor: '#f50504',
        header: {
        left: 'prev,next today',
        center: 'title',
        right: null
    },
        height: 250,
       eventRender: function(event, element) {
            element.attr('title', event.name);
        }
     })
 });
 </script>
<% end %>